!function(t){t.fn.pagination=function(e){function i(){return this.init.apply(this,arguments)}var a={total:0,row:10,num:2,current:1,template:{first:'<li class="first" data-index="first"><a href="javascript:;">首页</a></li>',last:'<li class="last" data-index="last"><a href="javascript:;">最后一页</a></li>',prev:'<li class="prev" data-index="prev"><a href="javascript:;">上一页</a></li>',next:'<li class="next" data-index="next"><a href="javascript:;">下一页</a></li>',ellipsis:'<li class="ellipsis" data-index="ellipsis"><a href="javascript:;">...</a></li>',item:'<li class="page-{{dataIndex}}" data-index="{{dataIndex}}"><a href="javascript:;">{{index}}</a></li>',wrapElement:"ul"},onJump:t.noop};return i.prototype={init:function(e,i){if(!e.template||!e.template.item)throw new Error("`item` cannot be empty!");this.config=e||{},this.template=e.template,this.$context=t(i),this.total=e.total,this.row=e.row,this.num=e.num,this.current=e.current,this.onJump=e.onJump,this.render(),this.bindEvent()},bindEvent:function(){function e(){var e=t(this),a=e.data("index");if("current"!==a&&"ellipsis"!=a){switch(a){case"prev":i.current--;break;case"next":i.current++;break;case"last":i.current=i.page;break;case"first":i.current=1;break;default:i.current=1*a}i.onJump.call(this,i.current,i),i.render()}}var i=this,a=this.template.item.match(/\<(\w+)/)[1];this.$context.on("click",a,e)},fixParams:function(){this.page=Math.ceil(this.total/this.row),this.num=Math.min(this.page-1,this.num),this.current=Math.min(Math.max(this.current,1),this.page)},render:function(){this.fixParams();var t=[],e=this.current,i=Math.max(1,e-this.num),a=i+this.num;i>2?(t.push(this.template.first||""),t.push(this.template.prev||""),t.push(this.getItemPageHtml(1)),t.push(this.template.ellipsis||"")):2==i&&t.push(this.getItemPageHtml(1));for(var n=i;a>=n;n++)t.push(this.getItemPageHtml(n));a<this.page-1&&t.push(this.template.ellipsis||""),a<this.page&&(t.push(this.getItemPageHtml(this.page)),t.push(this.template.next||""),t.push(this.template.last||"")),this.template.wrapElement&&(t.unshift("<"+this.template.wrapElement+">"),t.push("</"+this.template.wrapElement+">")),this.$context.html(t.join(""))},getItemPageHtml:function(t){var e=this,i={index:function(){return t},dataIndex:function(){return t===e.current?"current":t}};return e.template.item.replace(/\{\{(\w+)\}\}/g,function(t,e){return i[e]()})}},this.each(function(){var n=t(this).data("pagination");n?(t.extend(n,t.extend(n.config,e)),n.render()):t(this).data("pagination",new i(t.extend(a,e),this))}),this}}(jQuery);